(function(a){"use strict";function b(a,b,d){function e(b){var c=Math.max(a.settings("zoomMin"),Math.min(a.settings("zoomMax"),a.camera.ratio*(b.ratio||1)));sigma.misc.animation.camera(a.camera,{x:a.camera.x+(b.x||0),y:a.camera.y+(b.y||0),ratio:c},{duration:b.duration})}function f(){e({x:-d.displacement,duration:d.duration})}function g(){e({y:-d.displacement,duration:d.duration})}function h(){e({x:d.displacement,duration:d.duration})}function i(){e({y:d.displacement,duration:d.duration})}function j(){e({ratio:1/d.zoomingRatio,duration:d.duration})}function k(){e({ratio:d.zoomingRatio,duration:d.duration})}function l(){n.domElt.addEventListener("keydown",n.keyDown),n.domElt.addEventListener("keyup",n.keyUp),n.bind("37 18+37",f),n.bind("38 18+38",g),n.bind("39 18+39",h),n.bind("40 18+40",i),n.bind("32+38 18+32+38",j),n.bind("32+40 18+32+40",k)}function m(){n.domElt.removeEventListener("keydown",n.keyDown),n.domElt.removeEventListener("keyup",n.keyUp),n.unbind()}d=sigma.utils.extend(d,c),d.zoomingRatio=d.zoomingRatio||a.settings("zoomingRatio"),d.duration=d.duration||a.settings("mouseZoomDuration"),this.domElt=b.container,this.keys={},this.currentEvents=null;var n=this;sigma.classes.dispatcher.extend(this),this.domElt.tabIndex=d.tabIndex,this.keyDown=function(a){9===a.which||18===a.which||20===a.which||n.keys[a.which]||(n.keys[a.which]=!0,n.currentEvents=Object.keys(n.keys).join("+"),n.dispatchEvent(n.currentEvents))},this.keyUp=function(a){delete n.keys[a.which],n.currentEvents=null},this.focus=function(a){return n.domElt.focus(),!0},this.blur=function(a){return n.domElt.blur(),n.keys={},n.currentEvents=null,!0},this.kill=function(){m(),n.domElt=null,n.keys={},n.currentEvents=null},l()}if("undefined"==typeof sigma)throw"sigma.plugins.keyboard: sigma is not declared";sigma.utils.pkg("sigma.plugins");var c={displacement:100,duration:200,zoomingRatio:1.7,tabIndex:-1},d={};sigma.plugins.keyboard=function(a,c,e){return d[a.id]||(d[a.id]=new b(a,c,e),a.bind("kill",function(){sigma.plugins.killKeyboard(a)})),d[a.id]},sigma.plugins.killKeyboard=function(a){d[a.id]instanceof b&&(d[a.id].kill(),delete d[a.id])}}).call(this);
//# sourceMappingURL=sigma.plugins.keyboard.min.js.map