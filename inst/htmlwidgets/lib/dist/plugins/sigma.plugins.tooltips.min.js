(function(){"use strict";function a(a,c,d){function e(a){a.preventDefault()}function f(){i&&i.parentNode&&(i.parentNode.removeChild(i),i=null)}function g(){clearTimeout(j),clearTimeout(k),j=!1,k=!1,f()}function h(a){clearTimeout(j),clearTimeout(k),j=!1,k=setTimeout(function(){p||f()},a)}var i,j,k,l=this,m=[],n=[],o=[],p=!1,q=!1;if(Array.isArray(d.stage))for(var r=0;r<d.stage.length;r++)m.push(sigma.utils.extend(d.stage[r],b.stage));else m.push(sigma.utils.extend(d.stage,b.stage));if(Array.isArray(d.node))for(var r=0;r<d.node.length;r++)n.push(sigma.utils.extend(d.node[r],b.node));else n.push(sigma.utils.extend(d.node,b.node));if(Array.isArray(d.edge))for(var r=0;r<d.edge.length;r++)o.push(sigma.utils.extend(d.edge[r],b.edge));else o.push(sigma.utils.extend(d.edge,b.edge));if(sigma.classes.dispatcher.extend(this),a.bind("kill",function(){sigma.plugins.killTooltips(a)}),this.open=function(b,d,e,g,h){if(f(),i=document.createElement("div"),d.renderer){var j,k,l,m=Object.create(null);for(l in b)m[l]=b[l];if(j=d.renderer.call(a.graph,m,d.template),k=typeof j,"undefined"===k)return;"string"===k?i.innerHTML=j:i.appendChild(j)}else i.innerHTML=d.template;var n=window.getComputedStyle(c.container).position;if("static"!==n){i.style.position="absolute";var o=c.container.getBoundingClientRect();e=~~(e-o.left),g=~~(g-o.top)}i.className=d.cssClass,"css"!==d.position&&("static"===n&&(i.style.position="absolute"),i.style.left=e+"px",i.style.top=g+"px"),i.addEventListener("mouseenter",function(){p=!0},!1),i.addEventListener("mouseleave",function(){p=!1},!1),setTimeout(function(){if(i){c.container.appendChild(i);var a=document.body.getBoundingClientRect(),b=i.getBoundingClientRect(),f=b.top-a.top,j=a.bottom-b.bottom,k=b.left-a.left,l=a.right-b.right;"top"===d.position?(i.className=d.cssClass+" top",i.style.left=e-b.width/2+"px",i.style.top=g-b.height+"px"):"bottom"===d.position?(i.className=d.cssClass+" bottom",i.style.left=e-b.width/2+"px",i.style.top=g+"px"):"left"===d.position?(i.className=d.cssClass+" left",i.style.left=e-b.width+"px",i.style.top=g-b.height/2+"px"):"right"===d.position&&(i.className=d.cssClass+" right",i.style.left=e+"px",i.style.top=g-b.height/2+"px"),d.autoadjust&&(b=i.getBoundingClientRect(),f=b.top-a.top,j=a.bottom-b.bottom,k=b.left-a.left,l=a.right-b.right,0>j?(i.className=d.cssClass,("top"===d.position||"bottom"===d.position)&&(i.className=d.cssClass+" top"),i.style.top=g-b.height+"px"):0>f&&(i.className=d.cssClass,("top"===d.position||"bottom"===d.position)&&(i.className=d.cssClass+" bottom"),i.style.top=g+"px"),0>l?(i.className=d.cssClass,("left"===d.position||"right"===d.position)&&(i.className=d.cssClass+" left"),i.style.left=e-b.width+"px"):0>k&&(i.className=d.cssClass,("left"===d.position||"right"===d.position)&&(i.className=d.cssClass+" right"),i.style.left=e+"px")),h&&h()}},0)},this.close=function(){return g(),this.dispatchEvent("hidden"),this},this.kill=function(){this.unbindEvents(),clearTimeout(j),clearTimeout(k),i=null,j=null,k=null,q=!1,m=[],n=[],o=[]},this.unbindEvents=function(){for(var b=m.concat(n).concat(o),d=0;d<b.length;d++)a.unbind(b[d].show),a.unbind(b[d].hide),("rightClickNode"===b[d].show||"rightClickEdge"===b[d].show)&&c.container.removeEventListener("contextmenu",e);a.unbind("doubleClickStage"),a.unbind("doubleClickNode"),a.unbind("doubleClickEdge")},this.bindStageEvents=function(c){a.bind(c.show,function(a){if("doubleClickStage"===c.show||!q){var b=a.data.captor.clientX,d=a.data.captor.clientY;clearTimeout(j),j=setTimeout(function(){l.open(null,c,b,d,l.dispatchEvent.bind(l,"shown",a.data))},c.delay)}}),a.bind(c.hide,function(a){var c=i;h(b.stage.hideDelay),c&&l.dispatchEvent("hidden",a.data)})},this.bindNodeEvents=function(c){a.bind(c.show,function(a){if("doubleClickNode"===c.show||!q){var b=a.data.node;if(!b&&a.data.enter&&(b=a.data.enter.nodes[0]),void 0!=b){var d=a.data.captor.clientX,e=a.data.captor.clientY;clearTimeout(j),j=setTimeout(function(){l.open(b,c,d,e,l.dispatchEvent.bind(l,"shown",a.data))},c.delay)}}}),a.bind(c.hide,function(a){if(!a.data.leave||0!=a.data.leave.nodes.length){var c=i;h(b.node.hideDelay),c&&l.dispatchEvent("hidden",a.data)}})},this.bindEdgeEvents=function(c){a.bind(c.show,function(a){if("doubleClickEdge"===c.show||!q){var b=a.data.edge;if(!b&&a.data.enter&&(b=a.data.enter.edges[0]),void 0!=b){var d=a.data.captor.clientX,e=a.data.captor.clientY;clearTimeout(j),j=setTimeout(function(){l.open(b,c,d,e,l.dispatchEvent.bind(l,"shown",a.data))},c.delay)}}}),a.bind(c.hide,function(a){if(!a.data.leave||0!=a.data.leave.edges.length){var c=i;h(b.edge.hideDelay),c&&l.dispatchEvent("hidden",a.data)}})},d.stage){for(var s=!1,r=0;r<m.length;r++){if(null!==m[r].renderer&&"function"!=typeof m[r].renderer)throw new TypeError('"options.stage.renderer" is not a function, was '+m[r].renderer);if(void 0!==m[r].position&&"top"!==m[r].position&&"bottom"!==m[r].position&&"left"!==m[r].position&&"right"!==m[r].position&&"css"!==m[r].position)throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+m[r].position);"doubleClickStage"===m[r].show&&(s=!0)}for(var r=0;r<m.length;r++)this.bindStageEvents(m[r]);s||a.bind("doubleClickStage",function(a){g(),q=!0,l.dispatchEvent("hidden",a.data),setTimeout(function(){q=!1},b.doubleClickDelay)})}if(d.node){for(var t=!1,u=!1,r=0;r<n.length;r++){if(null!==n[r].renderer&&"function"!=typeof n[r].renderer)throw new TypeError('"options.node.renderer" is not a function, was '+n[r].renderer);if(void 0!==n[r].position&&"top"!==n[r].position&&"bottom"!==n[r].position&&"left"!==n[r].position&&"right"!==n[r].position&&"css"!==n[r].position)throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+n[r].position);"doubleClickNode"===n[r].show?u=!0:"rightClickNode"===n[r].show&&(t=!0)}for(var r=0;r<n.length;r++)this.bindNodeEvents(n[r]);u||a.bind("doubleClickNode",function(a){g(),q=!0,l.dispatchEvent("hidden",a.data),setTimeout(function(){q=!1},b.doubleClickDelay)})}if(d.edge){for(var v=!1,w=!1,r=0;r<o.length;r++){if(null!==o[r].renderer&&"function"!=typeof o[r].renderer)throw new TypeError('"options.edge.renderer" is not a function, was '+o[r].renderer);if(void 0!==o[r].position&&"top"!==o[r].position&&"bottom"!==o[r].position&&"left"!==o[r].position&&"right"!==o[r].position&&"css"!==o[r].position)throw new Error('"options.position" is not "top", "bottom", "left", "right", or "css", was '+o[r].position);"doubleClickEdge"===o[r].show?w=!0:"rightClickEdge"===o[r].show&&(v=!0)}for(var r=0;r<o.length;r++)this.bindEdgeEvents(o[r]);w||a.bind("doubleClickEdge",function(a){g(),q=!0,l.dispatchEvent("hidden",a.data),setTimeout(function(){q=!1},b.doubleClickDelay)})}(t||v)&&c.container.addEventListener("contextmenu",e)}if("undefined"==typeof sigma)throw new Error("sigma is not declared");sigma.utils.pkg("sigma.plugins");var b={stage:{show:"rightClickStage",hide:"clickStage",cssClass:"sigma-tooltip",position:"top",autoadjust:!1,delay:0,hideDelay:0,template:"",renderer:null},node:{show:"clickNode",hide:"clickStage",cssClass:"sigma-tooltip",position:"top",autoadjust:!1,delay:0,hideDelay:0,template:"",renderer:null},edge:{show:"clickEdge",hide:"clickStage",cssClass:"sigma-tooltip",position:"top",autoadjust:!1,delay:0,hideDelay:0,template:"",renderer:null},doubleClickDelay:800},c={};sigma.plugins.tooltips=function(b,d,e){return c[b.id]||(c[b.id]=new a(b,d,e)),c[b.id]},sigma.plugins.killTooltips=function(b){c[b.id]instanceof a&&c[b.id].kill(),delete c[b.id]}}).call(window);
//# sourceMappingURL=sigma.plugins.tooltips.min.js.map