(function(a){"use strict";function b(a){h=32===a.which,f.removeEventListener("keydown",b,!1),f.addEventListener("keyup",c,!1)}function c(a){h=!1,f.addEventListener("keydown",b,!1),f.removeEventListener("keyup",c,!1)}function d(c,d,e){function j(){d.dropEdges(),d.nbNodes()===c.graph.nodes().length?d.dropNodes():d.addNodes(),c.refresh({skipIndexation:!0})}function k(){v++}function l(){v=0,u.container.lastChild.addEventListener("mousemove",k)}function m(){setTimeout(function(){v=0;var a=d.nodes()[0];a&&null===g&&(g=a.id)},1),u.container.lastChild.removeEventListener("mousemove",k)}function n(){d.dropEdges(),d.dropNodes(),c.refresh({skipIndexation:!0})}function o(){var a=d.nodes().map(function(a){return a.id}),b=d.edges().map(function(a){return a.id});d.dropEdges(b),d.dropNodes(a),a.length==c.graph.nodes().length?c.graph.clear():(c.graph.dropEdges(b),c.graph.dropNodes(a)),c.refresh()}function p(){d.addNeighbors(),c.refresh({skipIndexation:!0})}function q(){d.dropEdges(),d.setNodesBy(function(a){return 0===c.graph.degree(a.id)}),c.refresh({skipIndexation:!0})}function r(){d.dropEdges(),d.setNodesBy(function(a){return 1===c.graph.adjacentNodes(a.id).length}),c.refresh({skipIndexation:!0})}function s(a){var b=a.data;b.length?(d.dropEdges(),d.addNodes(b.map(function(a){return a.id})),g=d.nodes()[0].id):(d.dropNodes(),g=null)}var t=this,u=e||c.renderers[0],v=0,w=null,x=null;f=f||document.getElementsByTagName("body")[0],u.container.lastChild.addEventListener("mousedown",l),u.container.lastChild.addEventListener("mouseup",m),this.init=function(){d.nbNodes()&&(g=d.nodes()[0].id)},this.clickNodesHandler=function(b){if(!(v>1)){var e=b.data.node[0].id,f=d.nodes().map(function(a){return a.id}),j=f.indexOf(e)>-1?a:e;if(d.dropEdges(),h){var k=j===e?a:e;d.dropNodes(k),c.refresh({skipIndexation:!0})}else{f.length>1&&d.addNodes(e);var l=d.nodes()[0];null!=l?g===l.id?null!=j?(d.dropNodes(),g=null):setTimeout(function(){i||(d.dropNodes(),g=null,c.refresh({skipIndexation:!0}))},c.settings("doubleClickTimeout")):g=l.id:g=j}null!=j&&(d.addNodes(j),c.refresh({skipIndexation:!0}))}},this.doubleClickNodesHandler=function(a){i=!0,setTimeout(function(){i=!1},100+c.settings("doubleClickTimeout"))},this.clickEdgesHandler=function(b){if(!(v>1)){var e=b.data.edge[0].id,f=d.edges().map(function(a){return a.id}),i=f.indexOf(e)>-1?a:e;if(d.dropNodes(),g=null,h){var j=i===e?a:e;d.dropEdges(j),c.refresh({skipIndexation:!0})}else d.dropEdges();null!=i&&(d.addEdges(i),c.refresh({skipIndexation:!0}))}},c.bind("clickNodes",this.clickNodesHandler),c.bind("doubleClickNodes",this.doubleClickNodesHandler),c.bind("clickEdges",this.clickEdgesHandler),f.addEventListener("keydown",b,!1),this.bindKeyboard=function(a){if(!a)throw new Error('Missing argument: "keyboard"');return w=a,w.bind("32+65 18+32+65",j),w.bind("32+85 18+32+85",n),w.bind("32+46 18+32+46",o),w.bind("32+69 18+32+69",p),w.bind("32+73 18+32+73",q),w.bind("32+76 18+32+76",r),this},this.unbindKeyboard=function(){return w&&(w.unbind("32+65 18+32+65",j),w.unbind("32+85 18+32+85",n),w.unbind("32+46 18+32+46",o),w.unbind("32+69 18+32+69",p),w.unbind("32+73 18+32+73",q),w.unbind("32+76 18+32+76",r),w=null),this},this.bindLasso=function(a){if(!a)throw new Error('Missing argument: "lassoInstance"');x=a,x.bind("selectedNodes",s)},this.unbindLasso=function(){x&&x.unbind("selectedNodes",s)},this.clear=function(){c.unbind("clickNodes",t.clickNodesHandler),c.unbind("doubleClickNodes",t.doubleClickNodesHandler),c.unbind("clickEdges",t.clickEdgesHandler),t.unbindKeyboard(),t.unbindLasso(),u.container.lastChild.removeEventListener("mousedown",l),u.container.lastChild.removeEventListener("mouseup",m),u.container.lastChild.removeEventListener("mousemove",k),u=null,w=null}}if("undefined"==typeof sigma)throw"sigma is not declared";sigma.utils.pkg("sigma.plugins");var e={},f=null,g=null,h=!1,i=!1;sigma.plugins.select=function(a,b,c){return e[a.id]||(e[a.id]=new d(a,b),a.bind("kill",function(){sigma.plugins.killSelect(a)})),e[a.id]},sigma.plugins.killSelect=function(a){e[a.id]instanceof d&&(e[a.id].clear(),delete e[a.id]),!e.length&&f&&(f.removeEventListener("keydown",b,!1),f.removeEventListener("keyup",c,!1),f=null)}}).call(this);
//# sourceMappingURL=sigma.plugins.select.min.js.map