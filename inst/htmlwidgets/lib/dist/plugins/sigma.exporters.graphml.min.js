(function(a){"use strict";function b(a,b,c){var d=null,e=null,f=null;if(window.Blob?(d=new Blob([a],{type:"text/xml"}),e=window.URL.createObjectURL(d)):f="data:text/xml;charset=UTF-8,"+encodeURIComponent('<?xml version="1.0" encoding="UTF-8"?>')+encodeURIComponent(a),navigator.msSaveBlob)navigator.msSaveBlob(d,c);else if(navigator.msSaveOrOpenBlob)navigator.msSaveOrOpenBlob(d,c);else{var g=document.createElement("a");g.setAttribute("href",window.Blob?e:f),g.setAttribute("download",c||"graph."+b),document.body.appendChild(g),g.click(),document.body.removeChild(g)}e&&setTimeout(function(){window.URL.revokeObjectURL(e)},0)}function c(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c)}function d(a,b){return null==b?null:b.split(".").reduce(function(a,b){return a[b]},a)}function e(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:null}if("undefined"==typeof sigma)throw"sigma.exporters.graphML: sigma is not declared";sigma.prototype.toGraphML=function(f){function g(a,b){var c;c="#"===b[0]?e(b):b.match(/\d+(\.\d+)?/g),a.r=c[0],a.g=c[1],a.b=c[2],a.a&&(a.a=c[3])}function h(b,c,d,e,f){d=d||{};var g=n.createElement(c);for(var h in d)if(d.hasOwnProperty(h)){var i=d[h];i!==a&&g.setAttribute(h,i)}if(e!==a||f){"[object Object]"===Object.prototype.toString.call(e)&&(e=JSON.stringify(e));var j=document.createTextNode(e);g.appendChild(j)}return b.appendChild(g),g}function i(b,e,f){var h=d(b,f),i={id:b.id};t.forEach(function(c){var d="x"===c||"y"===c?b[m+c]:b[c];"y"===c&&d&&(d=-parseFloat(d)),d!==a&&(i[("edge"===e?"edge_":"")+c]=d,"color"===c&&g(i,d))}),c(h,function(a,b){-1===t.indexOf(b)&&-1===s.indexOf(b)&&(u[b]?u[b]["for"]!==e&&(u[b]["for"]="all"):u[b]={"for":e,type:"string"},i[b]=a)}),"edge"===e?(i.source=b.source,i.target=b.target,w.push(i)):v.push(i)}function j(a,b){var c=h(a,"data",{key:"nodegraphics"}),d=h(c,"y:ShapeNode");h(d,"y:Geometry",{x:b.x,y:b.y,width:b.size,height:b.size}),h(d,"y:Fill",{color:b.color?b.color:"#000000",transparent:!1}),h(d,"y:NodeLabel",null,b.label?b.label:""),h(d,"y:Shape",{type:b.type?b.type:"circle"})}function k(a,b){var c=h(a,"data",{key:"edgegraphics"}),d=h(c,"y:PolyLineEdge");h(d,"y:LineStyle",{type:b.edge_type?b.edge_type:"line",color:b.edge_color?b.edge_color:"#0000FF",width:b.edge_size?b.edge_size:1}),h(d,"y:EdgeLabel",null,b.edge_label?b.edge_label:"")}f=f||{};var l,m,n=document.implementation.createDocument("","",null),o=new XMLSerializer,p=!0,q=this.graph.nodes(),r=this.graph.edges();f.renderer?(p=f.renderer instanceof sigma.renderers.webgl,m=p?f.renderer.camera.prefix:f.renderer.camera.readPrefix):m="";var s=["id","source","target"],t=["size","x","y","type","color","label","fixed","hidden","active"],u={size:{"for":"all",type:"double"},x:{"for":"node",type:"double"},y:{"for":"node",type:"double"},type:{"for":"all",type:"string"},color:{"for":"all",type:"string"},r:{"for":"all",type:"int"},g:{"for":"all",type:"int"},b:{"for":"all",type:"int"},a:{"for":"all",type:"double"},label:{"for":"all",type:"string"},fixed:{"for":"node",type:"boolean"},hidden:{"for":"all",type:"boolean"},active:{"for":"all",type:"boolean"}},v=[],w=[];q.forEach(function(a){i(a,"node",f.nodesAttributes)}),r.forEach(function(a){i(a,"edge",f.edgesAttributes)});var x=h(n,"graphml",{xmlns:"http://graphml.graphdrawing.org/xmlns","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://graphml.graphdrawing.org/xmlns http://www.yworks.com/xml/schema/graphml/1.1/ygraphml.xsd","xmlns:y":"http://www.yworks.com/xml/graphml","xmlns:java":"http://www.yworks.com/xml/yfiles-common/1.0/java","xmlns:sys":"http://www.yworks.com/xml/yfiles-common/markup/primitives/2.0","xmlns:x":"http://ww.yworks.com/xml/yfiles-common/markup/2.0"});c(u,function(a,b){("node"===a["for"]||"all"===a["for"])&&h(x,"key",{"attr.name":b,"attr.type":a.type,"for":"node",id:b}),("edge"===a["for"]||"all"===a["for"])&&h(x,"key",{"attr.name":b,"attr.type":a.type,"for":"edge",id:"edge_"+b})}),h(x,"key",{id:"nodegraphics","for":"node","yfiles.type":"nodegraphics","attr.type":"string"}),h(x,"key",{id:"edgegraphics","for":"edge","yfiles.type":"edgegraphics","attr.type":"string"});var y=h(x,"graph",{edgedefault:f.undirectedEdges?"undirected":"directed",id:f.graphId?f.graphId:"G","parse.nodes":q.length,"parse.edges":r.length,"parse.order":"nodesfirst"});v.forEach(function(a){var b=h(y,"node",{id:a.id});j(b,a),c(a,function(a,c){-1===s.indexOf(c)&&h(b,"data",{key:c},a,!0)})}),w.forEach(function(a){var b=h(y,"edge",{id:a.id,source:a.source,target:a.target});k(b,a),c(a,function(a,c){-1===s.indexOf(c)&&h(b,"data",{key:c},a,!0)})}),l='<?xml version="1.0" encoding="UTF-8"?>'+o.serializeToString(n),f.download&&b(l,"graphml",f.filename)}}).call(this);
//# sourceMappingURL=sigma.exporters.graphml.min.js.map