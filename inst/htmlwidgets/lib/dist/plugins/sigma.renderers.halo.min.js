(function(a){"use strict";if("undefined"==typeof sigma)throw new Error("sigma not in scope.");sigma.utils.pkg("sigma.settings");var b={nodeHaloColor:"#fff",nodeHaloStroke:!1,nodeHaloStrokeColor:"#000",nodeHaloStrokeWidth:.5,nodeHaloSize:50,nodeHaloClustering:!1,nodeHaloClusteringMaxRadius:1e3,edgeHaloColor:"#fff",edgeHaloSize:10,drawHalo:!0};sigma.settings=sigma.utils.extend(sigma.settings||{},b)}).call(this),function(a){"use strict";function b(){for(var a=[],b=-1,c=arguments.length;++b<c;){var d=arguments[b];a.push(d)}var e=a[0],f=-1,g=e?e.length:0,h=[];a:for(;++f<g;)if(d=e[f],h.indexOf(d)<0){for(var b=c;--b;)if(a[b].indexOf(d)<0)continue a;h.push(d)}return h}function c(a,b,c){for(var d=0;d<a.length;d++)null!=a[d]&&(b.beginPath(),b.arc(a[d].x,a[d].y,a[d].radius,0,2*Math.PI,!0),b.closePath(),c?b.stroke():b.fill())}function d(a,b,c){if(c=c||Number.POSITIVE_INFINITY,a.length>1)for(var d,e,f,g=!0;g;){g=!1;for(var h=0;h<a.length;h++)if(null!==a[h])for(var i=h+1;i<a.length;i++)if(null!==a[i]&&(e=sigma.utils.getDistance(a[h].x,a[h].y,a[i].x,a[i].y),c>e&&e<a[h].radius+a[i].radius)){g=!0,f=[{x:a[h].x,y:a[h].y,radius:a[h].radius},{x:a[i].x,y:a[i].y,radius:a[i].radius}],a[h].points&&(f=f.concat(a[h].points)),a[i].points&&(f=f.concat(a[i].points)),d={x:0,y:0};for(var j=0;j<f.length;j++)d.x+=f[j].x,d.y+=f[j].y;d.x/=f.length,d.y/=f.length,d.radius=Math.max.apply(null,f.map(function(a){return b+sigma.utils.getDistance(d.x,d.y,a.x,a.y)})),a.push({x:d.x,y:d.y,radius:d.radius,points:f}),a[h]=a[i]=null;break}}return a}function e(a){a=a||{},this.domElements.background||(this.initDOM("canvas","background"),this.domElements.background.width=this.container.offsetWidth,this.domElements.background.height=this.container.offsetHeight,this.container.insertBefore(this.domElements.background,this.container.firstChild));var e,f,g,h,i,j,k,l,m,n,o=this,p=o.contexts.background,q=this instanceof sigma.renderers.webgl,r=o.options.prefix,s=q?r.substr(5):r,t=a.nodeHaloClustering||o.settings("nodeHaloClustering"),u=a.nodeHaloClusteringMaxRadius||o.settings("nodeHaloClusteringMaxRadius"),v=a.nodeHaloColor||o.settings("nodeHaloColor"),w=a.nodeHaloSize||o.settings("nodeHaloSize"),x=a.nodeHaloStroke||o.settings("nodeHaloStroke"),y=a.nodeHaloStrokeColor||o.settings("nodeHaloStrokeColor"),z=a.nodeHaloStrokeWidth||o.settings("nodeHaloStrokeWidth"),A=o.settings("nodeBorderSize")||0,B=o.settings("nodeOuterBorderSize")||0,C=a.edgeHaloColor||o.settings("edgeHaloColor"),D=a.edgeHaloSize||o.settings("edgeHaloSize"),E=a.drawHalo||o.settings("drawHalo"),F=a.nodes||[],G=a.edges||[];E&&(F=q?F:b(a.nodes,o.nodesOnScreen),G=q?G:b(a.edges,o.edgesOnScreen),p.clearRect(0,0,p.canvas.width,p.canvas.height),p.save(),p.strokeStyle=C,G.forEach(function(a){e=o.graph.nodes(a.source),f=o.graph.nodes(a.target),p.lineWidth=(a[r+"size"]||1)+D,p.beginPath(),g={},h=e[s+"size"],i=e[s+"x"],j=e[s+"y"],k=f[s+"x"],l=f[s+"y"],p.moveTo(i,j),"curve"===a.type||"curvedArrow"===a.type?a.source===a.target?(g=sigma.utils.getSelfLoopControlPoints(i,j,h),p.bezierCurveTo(g.x1,g.y1,g.x2,g.y2,k,l)):(g=sigma.utils.getQuadraticControlPoint(i,j,k,l,a.cc),p.quadraticCurveTo(g.x,g.y,k,l)):(p.moveTo(i,j),p.lineTo(k,l)),p.stroke(),p.closePath()}),p.fillStyle=v,x&&(p.lineWidth=z,p.strokeStyle=y),m=A+B+w,n=F.filter(function(a){return!a.hidden}).map(function(a){return{x:a[s+"x"],y:a[s+"y"],radius:a[s+"size"]+m}}),t&&(n=d(n,m,u)),x&&c(n,p,!0),c(n,p),p.restore())}if("undefined"==typeof sigma)throw new Error("sigma not in scope.");sigma.renderers.canvas.prototype.halo=e,sigma.renderers.webgl.prototype.halo=e}.call(this);
//# sourceMappingURL=sigma.renderers.halo.min.js.map